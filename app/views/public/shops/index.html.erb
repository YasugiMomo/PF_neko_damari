<div class="container">
  <div class="row">
    <div class="col-8 mt-2 offset-1">
      <h2>猫カフェ一覧</h2>
    </div>

      <!--絞り込み機能-->
      <div class="col-4 offset-2 my-2">
        <%= link_to '評価の高い順', shops_path(star_count_desc: "true") %>|
        <%= link_to '評価の低い順', shops_path(star_count_asc: "true") %>
      </div>
      <!--検索機能-->
      <div class="col-4 search_form offset-1 my-2">
        <%= form_with url: shops_search_path, local: true, method: :get do |f| %>
         <%= f.text_field :word, placeholder: "店舗名で検索" %>
         <%= f.submit "検索", class: "btn btn-primary" %>
        <% end %>
      </div>

    <div class="row justify-content-center">

      <% @shops.each do |shop| %>
        <div class="col-8 card mb-3">

          <div class="row card-header">

              <div class="col-4 card-header-image">
                <%= image_tag shop.get_shop_image(100,100) %>
              </div>
              <div class="col-8 card-header-title pt-4">
                <%= shop.name %><br>
                <%= shop.address %>
              </div>

              <div class="col-4 star-rating">
                <div class="average-review-rating" data-score=<%= shop.avg_rate %>></div>
              </div>
              <div class="col-8 average-score-display">
                <%= shop.avg_rate %>点（<%= link_to shop.reviews.count, shop_reviews_path(shop.id) %>件のレビュー）
              </div>
          </div>

          <div class="row card-footer text-center">
            <div class="col-6">
              <%= link_to shop_reviews_path(shop), class: "button card-footer-item" do %>
                レビューを見る
              <% end %>
            </div>
            <div class="col-6">
              <%= link_to shop_path(shop), class: "button card-footer-item" do %>
                レビューを書く
              <% end %>
            </div>
          </div>

        </div>
      <% end %>


      <!--平均点を星で表示-->
      <%= render 'average' %>
    </div>
  </div>
  <div class="row paginate justify-content-center">
    <%= paginate @shops %>
  </div>
</div>